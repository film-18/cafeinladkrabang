if (self.CavalryLogger) { CavalryLogger.start_js(["zpGok"]); }

__d("AbstractRangeInput.react",["cx","Event","Keys","React","ReactDOM","UserAgent","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;var h={BLOCK:"block",PUSH:"push",FREE:"free"};c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$7=function(a,c){switch(b("Event").getKeyCode(c)){case b("Keys").DOWN:case b("Keys").LEFT:d.$8(a);d.$9(-1);break;case b("Keys").RIGHT:case b("Keys").UP:d.$8(a);d.$9(1);break}};d.$10=function(a,c){b("Event").prevent(c),d.$8(a),d.$2.dragStartX=c.nativeEvent.clientX};d.$3=function(a){d.$2&&d.$9(a.clientX-d.$2.dragStartX)};d.$8=function(a){d.$2={draggingIdx:a,dragStartValue:d.state.values[a],scale:b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)).clientWidth}};d.$9=function(a){__p&&__p();var b=(d.props.max-d.props.min)/d.$2.scale;a=d.$2.dragStartValue+a*b;b=[].concat(d.state.values);var c=b.length,e=d.$2.draggingIdx;if(d.props.step){var f=1/d.props.step;a=Math.round(a*f)/f}f=d.props.min;var g=d.props.max;d.props.behavior===h.BLOCK&&(f=e>0?b[e-1]:f,g=e<c-1?b[e+1]:g);a=a<f?f:a;a=a>g?g:a;b[e]=a;if(d.props.behavior===h.PUSH){for(var c=e+1,f=b.length;c<f;c++){if(b[c]>=a)break;b[c]=a}for(c=e-1;c>=0;c--){if(b[c]<=a)break;b[c]=a}}d.setState({values:b});d.props.onChange&&d.props.onChange(b)};d.$4=function(a){d.$2&&(d.$2=null)};d.$6=function(a){d.$2&&(d.$2=null)};d.$5=function(a){d.$2&&a.touches&&d.$9(a.touches[0].clientX-d.$2.dragStartX)};var e=c.values;c.behavior!==h.FREE&&e.sort();d.state={values:e};return d}c.getDerivedStateFromProps=function(a,b){return{values:a.values}};var d=c.prototype;d.componentDidMount=function(){var a=this,c=b("UserAgent").isBrowser("IE < 9")?document.documentElement:window;this.$1=b("Event").listen(c,{selectstart:function(c){a.$2&&b("Event").prevent(c)},mousemove:this.$3,mouseup:this.$4,touchmove:this.$5,touchend:this.$6})};d.componentWillUnmount=function(){for(var a in this.$1)this.$1[a]&&this.$1[a].remove(),this.$1[a]=null};d.$11=function(a,c){b("Event").prevent(c),this.$8(a),this.$2.dragStartX=c.nativeEvent.touches[0].clientX};d.render=function(){__p&&__p();var a=this,c=this.state.values,d=this.props.disabled,e=c.length>1,f=this.props.max-this.props.min;c=c.map(function(c,g){var h=(c-a.props.min)/f,i=a.props.name+(e?"["+g+"]":"");return b("React").jsx("div",{className:"_4qwr"+(d?" _4qws":""),onDragStart:b("Event").prevent,onKeyDown:d?null:function(b){return a.$7(g,b)},onMouseDown:d?null:function(b){return a.$10(g,b)},onTouchEnd:d?null:function(b){return a.$6(g,b)},onTouchMove:d?null:function(b){return a.$5(g,b)},onTouchStart:d?null:function(b){return a.$11(g,b)},style:{left:h*100+"%"},tabIndex:0,children:b("React").jsx("input",{onChange:a.props.onChange,name:i,value:c,type:"hidden"})},"thumb-"+g)});return b("React").jsxs("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_4qwt"),children:[b("React").jsx("div",{className:"_4qwu"}),c]}))};return c}(b("React").Component);c.propTypes={name:a.string,min:a.number,max:a.number,step:a.number,disabled:a.bool,values:a.array,behavior:a.oneOf([h.BLOCK,h.PUSH,h.FREE]),onChange:a.func};c.defaultProps={name:"",min:0,max:1,step:.01,disabled:!1,values:[.5],behavior:h.FREE};e.exports=c}),null);
__d("XPhotoCropSaverAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photo/crop/upload/",{photo_id:{type:"Int",required:!0},height:{type:"Float",required:!0},width:{type:"Float",required:!0},x:{type:"Float",required:!0},y:{type:"Float",required:!0},source:{type:"Enum",enumType:0}})}),null);
__d("PhotoCropperSaver",["ActorURI","ArbiterMixin","AsyncRequest","XPhotoCropSaverAsyncController","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$PhotoCropperSaver1=b;return c}var d=c.prototype;d.saveCroppedPhoto=function(a,c){a=b("XPhotoCropSaverAsyncController").getURIBuilder().setFloat("x",a.x).setFloat("y",a.y).setFloat("width",Math.min(a.width,1)).setFloat("height",Math.min(a.height,1)).setInt("photo_id",this.$PhotoCropperSaver1).getURI();c&&(a=b("ActorURI").create(a,c));new(b("AsyncRequest"))(a).setErrorHandler(this.$PhotoCropperSaver2.bind(this)).setHandler(this.$PhotoCropperSaver3.bind(this)).send()};d.$PhotoCropperSaver2=function(a){this.inform("error",a)};d.$PhotoCropperSaver3=function(a){this.inform("success",a)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("PhotoZoomCropStrings",["fbt"],(function(a,b,c,d,e,f,g){a={BUTTON_ZOOM_IN:g._("\u0e02\u0e22\u0e32\u0e22"),BUTTON_ZOOM_OUT:g._("\u0e22\u0e48\u0e2d")};e.exports=a}),null);
__d("PhotoZoomCropSlider.react",["cx","AbstractRangeInput.react","PhotoZoomCropStrings","React","clamp","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;var h=6;c=b("React").createClass({displayName:"PhotoZoomCropSlider",propTypes:{onZoom:a.func.isRequired,position:a.number,zoom:a.number,zoomRange:a.object.isRequired},render:function(){var a=this.props.zoomRange,c=a.max===this.props.zoom,d=a.min===this.props.zoom;return b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_55vh"),children:[b("React").jsx("button",{className:(d?"_4nc5":"")+" _4nc6",onClick:this._minus,tabIndex:d?-1:0,title:b("PhotoZoomCropStrings").BUTTON_ZOOM_OUT}),b("React").jsx(b("AbstractRangeInput.react"),{className:"_55vj",disabled:a.max===a.min,max:a.max,min:a.min,onChange:this._logarithmicZoom,values:[this.props.position]}),b("React").jsx("button",{className:(c?"_4nc5":"")+" _4nc7",onClick:this._plus,tabIndex:c?-1:0,title:b("PhotoZoomCropStrings").BUTTON_ZOOM_IN})]})},_logarithmicZoom:function(a){__p&&__p();var c=this.props.zoomRange,d=c.max;c=c.min;var e=Math.log2(d),f=Math.log2(c);a=a[0];e=(e-f)/d;var g=Math.exp(f+e*d),h=Math.exp(f+e*c);f=Math.exp(f+e*a);e=b("clamp")((f-h)/(g-h),0,100);f=c+e*(d-c);this.props.onZoom([f],a)},_zoomInDirection:function(a){var c=this.props.zoomRange,d=c.max;c=c.min;this.props.onZoom([b("clamp")(this.props.zoom+a*(d-c)/h,c,d)])},_minus:function(){this._zoomInDirection(-1)},_plus:function(){this._zoomInDirection(1)}});e.exports=c}),null);
__d("PhotoZoomCrop.react",["cx","BasicVector","PhotoZoomCropDimensions","PhotoZoomCropImage.react","PhotoZoomCropImagePreview.react","PhotoZoomCropMixin","PhotoZoomCropSlider.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=a.shape({x:a.number.isRequired,y:a.number.isRequired});d=b("React").createClass({displayName:"PhotoZoomCrop",mixins:[b("PhotoZoomCropMixin")],propTypes:{center:c,cropAspectRatio:c,cropSizeRatio:c,cropSize:c,imageSize:a.instanceOf(b("BasicVector")),messageText:a.string,overlay:a.element,previewSize:a.number,src:a.oneOfType([a.string,a.object]),warningText:a.string},getDefaultProps:function(){return{previewSize:32}},getInitialState:function(){__p&&__p();var a=this.props,c=a.center,d=a.cropAspectRatio,e=a.cropSizeRatio,f=a.cropSize;a=a.imageSize;this._dims=new(b("PhotoZoomCropDimensions"))(a);c&&this._dims.setCenter(c.x,c.y);f&&(this._dims.setSize(f.x,f.y),this._dims.setZoom(this._dims.getSize().x/a.x));if(e){c=e.x*a.x;this._dims.setZoom(this._dims.getSize().x/c)}d&&this._dims.setRatio(d.x,d.y);f=this._getDimensionsState();f.position=this._dims.getZoom();return f},render:function(){var a;return(a=b("React")).jsxs("div",{className:b("joinClasses")(this.props.className,"_4liw"),children:[a.jsx(b("PhotoZoomCropImage.react"),{className:"_1szc",dimensions:this._dims,enableDrag:this._dims.isCurrentlyDragable(),onMove:this._handleMove,overlay:this.props.overlay,src:this.props.src}),a.jsx(b("PhotoZoomCropImagePreview.react"),{className:"_1szd",dimensions:this._dims,overlay:this.props.overlay,size:{x:this.props.previewSize,y:this.props.previewSize},src:this.props.src}),a.jsx(b("PhotoZoomCropSlider.react"),{className:"_4lix",onZoom:this._handleZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage()]})},__getZoom:function(){return this.state.zoom}});e.exports=d}),null);