if (self.CavalryLogger) { CavalryLogger.start_js(["jR3qn"]); }

__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=function(d){this.$1=new(b("AsyncUploadRequest"))(c).setFiles({file:d}).setRelativeTo(a).setStatusElement(a).setAllowCrossOrigin(this.$2),this.$1.subscribe("complete",function(a,b){this.onCompleteCallback(b),this.$1=null}.bind(this)),this.$1.send()}.bind(this);this.dragDropTarget=new(b("DragDropTarget"))(a).setOnFilesDropCallback(function(a){a.length&&this.asyncProcess(a,function(a){a.length&&d(a)})}.bind(this));this.asyncProcess=function(a,b){b(a)};this.preprocess=function(a){return a};this.onCompleteCallback=b("emptyFunction")}var c=a.prototype;c.setAllowCrossOrigin=function(a){this.$2=a;return this};c.setPreprocessor=function(a){this.preprocess=a;return this};c.setAsyncProcessor=function(a){this.asyncProcess=a;return this};c.onComplete=function(a){this.onCompleteCallback=a;return this};c.abort=function(){this.$1&&this.$1.abort()};c.activate=function(){if(!b("DragDropFileUpload").isSupported())return this;this.dragDropTarget.setFileFilter(this.preprocess).enable();return this};return a}();e.exports=a}),null);
__d("SinglePictureUploadTarget",["fbt","Bootloader","Dialog","ErrorDialog","FileUploadTarget","emptyFunction","htmlSpecialChars"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c){this.fileUploadTarget=new(b("FileUploadTarget"))(a,c),this.preprocessCallback=b("emptyFunction"),this.asyncPreprocessCallback=function(a,b){b(a)},this.oncompleteCallback=b("emptyFunction"),this.afterSuccessCallback=b("emptyFunction")}var c=a.prototype;c.setAllowCrossOrigin=function(a){this.fileUploadTarget.setAllowCrossOrigin(a);return this};c.setPreprocessCallback=function(a){this.preprocessCallback=a;return this};c.setAsyncPreprocessCallback=function(a){this.asyncPreprocessCallback=a;return this};c.setOncompleteCallback=function(a){this.oncompleteCallback=a;return this};c.setAfterSuccessCallback=function(a){this.afterSuccessCallback=a;return this};c.activate=function(){__p&&__p();var a=function(a){return b("htmlSpecialChars")(a.name)},c=function(c){c.length>1&&(b("ErrorDialog").show(g._("\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"),g._("You can only select 1 photo to upload to this album. Only the first photo you selected will be uploaded.")),c=[c[0]]);var d=c[0];if(!d.type.match(/^image\//)){b("ErrorDialog").show(g._("\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"),g._("\u0e40\u0e23\u0e32\u0e44\u0e21\u0e48\u0e23\u0e39\u0e49\u0e08\u0e31\u0e01\u0e40\u0e19\u0e37\u0e49\u0e2d\u0e2b\u0e32\u0e02\u0e2d\u0e07 {filename}  \u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e43\u0e2b\u0e49\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e40\u0e1b\u0e47\u0e19\u0e20\u0e32\u0e1e\u0e23\u0e39\u0e1b\u0e41\u0e1a\u0e1a jpg, gif \u0e2b\u0e23\u0e37\u0e2d png",[g._param("filename",a(d))]));return[]}this.preprocessCallback(c);return c}.bind(this),d=function(c,d){__p&&__p();var e=1024*1024*16,f=1024*1024*1,h=function(f){f.size>e?(b("ErrorDialog").show(g._("\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"),g._("{filename} is too large. Please resize your photo to under 8000x8000 pixels and try again.",[g._param("filename",a(c[0]))])),d([])):this.asyncPreprocessCallback([f],d)}.bind(this),i=c[0];i.size<f?h(i):b("Bootloader").loadModules(["ImageExif","ImageResizer"],function(a,b){__p&&__p();if(!b.isSupported()){h(i);return}var c=new b(i,null,null);c.subscribe("resized",function(a,b){b.size>i.size?h(i):h(b)}.bind(this));c.subscribe("error",function(){h(i)}.bind(this));a.readFromFile(i,function(a){a&&c.setOrientation(a.Orientation),c.resize()})},"SinglePictureUploadTarget")}.bind(this),e=function(a){__p&&__p();a=a[0];if(!a.getResponse())return;this.oncompleteCallback(a);var c=a.getResponse().getPayload();if(a.isSuccess())this.afterSuccessCallback(c);else if(c&&c.__dialog){a=new(b("Dialog"))();a.$1(c.__dialog);a.setButtons(b("Dialog").OK).show()}else b("ErrorDialog").show(c.error.title,c.error.body)}.bind(this);return this.fileUploadTarget.onComplete(e).setPreprocessor(c).setAsyncProcessor(d).activate()};return a}();e.exports=a}),null);
__d("ProfilePicAccessibility",["csx","cx","CSS","FocusEvent","Parent","Run","ifRequired"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null,j=[],k=[],l=!1;function m(a){i&&b("CSS").conditionClass(i,"_5-3g",a||l)}function n(a){l=a,m(a)}function o(){i=null,j.map(function(a){return a.unsubscribe()}),j=[],k.map(function(a){return a.remove()}),k=[]}a={init:function(a,c){__p&&__p();if(a.length===0)return;var d=b("Parent").bySelector(a[0],"._5ycb");i=d instanceof HTMLElement?d:null;k=a.map(function(a){return b("FocusEvent").listen(a,m)});c&&(j=[c.subscribe("show",n.bind(null,!0)),c.subscribe("hide",n.bind(null,!1))]);b("ifRequired")("XUISubNavigationLoader",function(a){return a.onLeave(o)},function(){return b("Run").onLeave(o)})}};e.exports=a}),null);
__d("XProfilePicUploadAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/upload/",{profile_id:{type:"Int",required:!0},photo_source:{type:"Enum",defaultValue:9,enumType:0}})}),null);
__d("ProfileTempPhotoUploader",["CSS","EventEmitter","FileInputUploader","JpegResizer","Parent","PhotosMimeType","XProfilePicUploadAsyncController","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this)||this;f.$ProfileTempPhotoUploader1=c;f.$ProfileTempPhotoUploader6=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",d).setEnum("photo_source",e).getURI();b("JpegResizer").isSupported()&&(f.$ProfileTempPhotoUploader4=new(b("JpegResizer"))(1));f.$ProfileTempPhotoUploader2=b("tidyEvent")(f.$ProfileTempPhotoUploader1.subscribe("change",function(){return f.attemptUpload()}));return f}var d=c.prototype;d.removeListener=function(){this.$ProfileTempPhotoUploader2&&(this.$ProfileTempPhotoUploader2.unsubscribe(),this.$ProfileTempPhotoUploader2=null)};d.attemptUpload=function(){__p&&__p();var a=this;this.$ProfileTempPhotoUploader3&&this.$ProfileTempPhotoUploader3.abort();if(!this.$ProfileTempPhotoUploader1.getValue()){this.reset();return}var c=this.$ProfileTempPhotoUploader1.getInput();c.name||(c.name="photo");this.$ProfileTempPhotoUploader5=b("Parent").byClass(c,"stat_elem");this.$ProfileTempPhotoUploader5&&b("CSS").addClass(this.$ProfileTempPhotoUploader5,"async_saving");c=this.$ProfileTempPhotoUploader3=new(b("FileInputUploader"))(c).setURI(this.$ProfileTempPhotoUploader6).setAllowCrossOrigin(!0);this.emit("uploadStart",c);b("tidyEvent")([c.subscribe("success",function(b,c){a.reset(),a.emit("uploadSucess",c.response.getPayload())}),c.subscribe("failure",function(){a.reset(),a.emit("uploadFailure")})]);this.$ProfileTempPhotoUploader4&&c.setUploadInParallel(!0).setPreprocessHandler(this.$ProfileTempPhotoUploader7.bind(this));c.send()};d.reset=function(){this.$ProfileTempPhotoUploader5&&b("CSS").removeClass(this.$ProfileTempPhotoUploader5,"async_saving"),this.$ProfileTempPhotoUploader3=null,this.$ProfileTempPhotoUploader1.clear()};d.$ProfileTempPhotoUploader7=function(a,c){__p&&__p();var d=this,e=a.getFile();if(!e||!b("PhotosMimeType").isJpeg(e.type)){this.emit("resizeSkipped");c(a);return}this.$ProfileTempPhotoUploader4&&this.$ProfileTempPhotoUploader4.resizeBlob(e,function(b,e,f,g,h,i,j){if(b){d.emit("resizeFailure");c(a);return}f?d.emit("resizeSkipped"):(a.setFile(e),d.emit("resizeSuccess"));c(a)})};return c}(b("EventEmitter"));e.exports=a}),null);
__d("ProfilePicUploadToCrop",["ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfileTempPhotoUploader"],(function(a,b,c,d,e,f){__p&&__p();function g(){return b("ProfilePicCropViewerInit").getFlowType()}a=function(){"use strict";__p&&__p();function a(a,c,d,e,f,g,h){__p&&__p();var i=this;g===void 0;this.$1=f;this.$2=e;this.$3=new(b("ProfileTempPhotoUploader"))(c,f,9);this.$3.addListener("uploadStart",function(a){return i.uploadStart(a)});this.$3.addListener("uploadSucess",function(a){return i.uploadSucess(a)});this.$3.addListener("uploadFailure",function(){return i.uploadFailure()});this.$3.addListener("resizeSkipped",function(){return i.resizeSkipped()});this.$3.addListener("resizeStart",function(){return i.resizeStart()});this.$3.addListener("resizeSuccess",function(){return i.resizeSuccess()});this.$3.addListener("resizeFailure",function(){return i.resizeFailure()});this.$4=h}var c=a.prototype;c.attemptUpload=function(){this.$3.removeListener(),this.$3.attemptUpload()};c.resizeStart=function(){b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_BEGIN)};c.resizeSkipped=function(){b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_SKIPPED)};c.resizeSuccess=function(){b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_SUCCESS)};c.resizeFailure=function(){b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_FAIL)};c.uploadStart=function(a){b("ProfilePictureFlowLogging").setAction(b("ProfilePictureFlowLogging").action.UPLOAD).setFlowType(g()).log(b("ProfilePictureFlowLogging").step.UPLOAD_SELECT),b("ProfilePicCropViewerInit").loading(this.$1,{uploadRequest:a})};c.uploadSucess=function(b){a.loadCropper(b,this.$1,this.$2,this.$4)};c.uploadFailure=function(){b("ProfilePicCropViewerInit").close(),b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.FAIL)};a.loadCropper=function(a,c,d,e){b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.UPLOAD_SUCCESS),b("ProfilePicCropViewerInit").loadID(a.fbid,c,{method:"upload",source:d,warnOnCancel:!0,successCallback:e})};return a}();e.exports=a}),null);
__d("ProfilePicDragAndDropUpload",["ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfilePicUploadToCrop","SinglePictureUploadTarget"],(function(a,b,c,d,e,f){a={init:function(a,c,d){var e=new(b("SinglePictureUploadTarget"))(a,c).setAllowCrossOrigin(!0).setPreprocessCallback(function(){b("ProfilePictureFlowLogging").setFlowType(b("ProfilePicCropViewerInit").getFlowType()).log(b("ProfilePictureFlowLogging").step.DRAG_AND_DROP),b("ProfilePicCropViewerInit").loading(d,{uploadRequest:e})}).setAfterSuccessCallback(function(a){b("ProfilePicUploadToCrop").loadCropper(a,d,"timeline")}).activate()}};e.exports=a}),null);
__d("ProfileNavigationItemDropdown",["Event","goURI","setImmediate","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){__p&&__p();var c=this,d=a.menuElement,e=a.menuInstance,f=a.href;this.$1=[];this.$2=[];b("tidyEvent")(b("Event").listen(d,"click",function(a){c.$1.forEach(function(a){a.call(c)}),b("setImmediate")(function(){a.ctrlKey||a.metaKey?window.open(f,"_blank"):b("goURI")(f)})}));e.subscribe("itemclick",function(a,b){c.$2.forEach(function(a){a.call(c,b.item)})})}var c=a.prototype;c.onTriggerClick=function(a){this.$1.push(a)};c.onMenuItemClick=function(a){this.$2.push(a)};return a}();e.exports=a}),null);
__d("legacy:TimelineCover",["TimelineCover"],(function(a,b,c,d,e,f){a.TimelineCover=b("TimelineCover")}),3);
__d("TimelineCoverDragdropEdit",["SinglePictureUploadTarget","TimelineCover"],(function(a,b,c,d,e,f){__p&&__p();var g=function(){var a=b("TimelineCover").getInstance();a!==null&&a.hideLoadingIndicator()},h=function(a){var c=b("TimelineCover").getInstance(),d=a.id;a=a.photo_node;c!==null&&c.updateCoverImage(d,a)},i=function(a){a=b("TimelineCover").getInstance();a!==null&&a.showLoadingIndicator()};a=function(a,c){new(b("SinglePictureUploadTarget"))(a,c).setAllowCrossOrigin(!0).setPreprocessCallback(i).setOncompleteCallback(g).setAfterSuccessCallback(h).activate()};f.initialize_timeline_cover_drop_target=a}),null);
__d("TimelineCoverPhotoChangePrivacyDialog",["Arbiter","Event"],(function(a,b,c,d,e,f){a={init:function(a,b,c){this._dialog=a,this._tooltipLink=c,this._closeButton=b,this._showDialog=!1,this._tooltip=null},registerDialogShow:function(){this._showDialog=!0,b("Arbiter").subscribe("CoverPhotoEdit",function(a,b){if(!this._showDialog)return;b.state==="open"?(this._dialog&&this._dialog.show(),this._tooltipLink&&(this._tooltip=this._tooltipLink.getAttribute("data-hover"),this._tooltipLink.setAttribute("data-hover",null))):b.state==="closed"&&this.hideDialog()}.bind(this)),b("Event").listen(this._closeButton,"click",this.hideDialog.bind(this))},hideDialog:function(){this._dialog&&this._dialog.hide(),this._tooltipLink&&this._tooltipLink.setAttribute("data-hover",this._tooltip),this._showDialog=!1}};e.exports=a}),null);
__d("XTimelineCoverPhotoGalleryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/timeline/cover/gallery/",{})}),null);
__d("TimelineCoverPhotoNUX",["cx","AsyncRequest","CSS","ProfileWizardUIManager","XTimelineCoverPhotoGalleryController","$","destroyOnUnload"],(function(a,b,c,d,e,f,g){__p&&__p();var h="fbProfileCover",i="_3y4k";a=function(){"use strict";__p&&__p();a.init=function(b,c,d,e){new a(b,c,d,e)};function a(a,c,d,e){__p&&__p();var f=this;this.$6=!1;this.$2=c;this.$1=b("$")(h);this.$4=a.getPopover();this.$3=e;b("ProfileWizardUIManager").subscribeCustomShowHandler(d,function(){return f.$7()});b("ProfileWizardUIManager").subscribeCustomHideHandler(d,function(){return f.$8()});this.$5=this.$4.subscribeOnce("show",function(){if(f.$3||f.$6)return;f.$4.hideLayer();f.$7()});var g=this.$2.subscribe("cancel",function(){b("CSS").removeClass(f.$1,i)}),j=this.$2.subscribe("confirm",function(){f.$4.showLayer(),f.$8()});b("destroyOnUnload")(function(){f.$2.unsubscribe(g),f.$2.unsubscribe(j),f.$4.unsubscribe(f.$5)})}var c=a.prototype;c.$8=function(){this.$2.hide(),b("CSS").removeClass(this.$1,i)};c.$7=function(){if(this.$6)return;this.$2.show();this.$3||(b("CSS").addClass(this.$1,i),new(b("AsyncRequest"))().setURI(b("XTimelineCoverPhotoGalleryController").getURIBuilder().getURI()).send());this.$6=!0};return a}();e.exports=a}),null);
__d("TimelineProfilePic",["Arbiter","CSS","Dialog","DOM","HTML","Run","TimelineProfilePicConfig","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();a.init=function(b,c){a.destroyInstance(),g=new a(b||"fbProfileCover",c||".profilePicThumb")};function a(a,c){this.$1=b("$")(a),this.$2=c,this.$3=[b("Arbiter").subscribe(b("TimelineProfilePicConfig").loading,this.startLoading.bind(this)),b("Arbiter").subscribe(b("TimelineProfilePicConfig").success,this.onUploadSuccess.bind(this))],b("Run").onBeforeUnload(this.onBeforeUnload.bind(this)),b("Run").onLeave(this.destroy.bind(this))}var c=a.prototype;c.$4=function(a){this.$5=a,b("CSS").conditionClass(this.$1,"profilePicLoading",a)};c.destroy=function(){this.$3.forEach(function(a){a.unsubscribe()}),this.$3=[],g=null};c.startLoading=function(a,b){this.$4(!!b.isLoading)};c.onUploadSuccess=function(a,c){__p&&__p();this.$4(!1);if(!c.newPic)return;a=b("Dialog").getCurrent();a&&a.hide();a=c.newPic;b("DOM").replace(b("DOM").find(this.$1,this.$2),typeof a==="string"?b("HTML")(a):a);if(c.profileId&&c.headerPicURL){a=b("ge")("profile_pic_header_"+c.profileId);a&&(a.src=c.headerPicURL)}a=b("ge")("fbProfilePicSelector");a&&b("CSS").removeClass(a,"fbTimelineNullProfilePicSelector")};c.onBeforeUnload=function(){if(g===this&&this.$5)return b("TimelineProfilePicConfig").leavingMessage};a.destroyInstance=function(){g&&g.destroy()};return a}();e.exports=a}),null);
__d("XProfileRefresherDialogImpressionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/refresher/dialog_impression/",{})}),null);
__d("ProfileActionsUpdateInfoButton",["AsyncRequest","CSS","Event","XProfileRefresherDialogImpressionController","destroyOnUnload"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c,d){var e=this;this.$1=b("Event").listen(a,"click",function(){c.hide(),b("CSS").hide(d),e.$2()});c.subscribe("cancel",function(){return e.$2()});b("destroyOnUnload")(function(){return e.$3()})}var c=a.prototype;c.$3=function(){this.$1&&this.$1.remove()};c.$2=function(){new(b("AsyncRequest"))().setURI(b("XProfileRefresherDialogImpressionController").getURIBuilder().getURI()).send()};return a}();e.exports=a}),null);